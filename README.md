### 俄语字母笔顺 - 项目说明

本项目是一个用于展示俄语字母（西里尔字母）书写笔顺的静态 Web 应用，并配套了两个辅助工具用于从位图描摹/验证 SVG 笔画动画。无需打包或后端，使用本地静态服务器即可运行。

---

### 快速开始
- 打开静态服务器（推荐，避免浏览器在 `file://` 模式下拦截 `fetch`）：
```bash
# 方式一：Python 3（在项目根目录运行）
python3 -m http.server 8000
# 访问： http://localhost:8000/

# 方式二：Node（npx）
npx http-server -p 8000
```
- 浏览器访问首页：`/index.html`

---

### 目录结构
- `index.html`：主应用（React 单文件版），展示字母网格、详情页（大写/小写并排）、自动/手动笔顺播放、设置、键盘导航等。
- `letters/`：字母 SVG 资源与映射：
  - `*.svg`：每个字母的笔画路径（按顺序排列的 `<path>`）。
  - 命名约定：大写 `А.svg`，小写 `a_l.svg`（小写统一以 `_l` 结尾）。
  - `map.json`：可覆盖默认文件名并声明仅大写的字母（`isSingle`）。
- `resources/letters.sketch`：字母笔画的矢量源文件（Sketch）。
- `tools/`：两个辅助工具页面：
  - `strokes.html`：给定一组 `<path d>` 或完整 SVG，按顺序红色描边预览动画。
  - `trace.html`：从位图上手动/半自动描摹路径并导出 SVG。

---

### 主应用（index.html）
- **入口与技术**：内联 React + ReactDOM + Babel，直接在浏览器运行。
- **首页**：展示俄语大写字母网格，点击进入详情。
- **详情页**：
  - 并排展示大写与小写（必要时只显示大写），自动按笔顺依次描边；结束后可逐笔回放与跳转。
  - 顶部有字母导航（上一/下一），中间有每笔预览缩略图，底部有重播与逐笔切换按钮。
  - 设置（速度 px/s、笔宽、间隔 s）在右上角弹出层中。
- **键盘操作**：
  - 左/上箭头：上一笔；右/下箭头：下一笔。
  - PageUp 或 Ctrl+←：上一字母；PageDown 或 Ctrl+→：下一字母。
- **资源解析**：
  - 优先读取 `letters/map.json` 的显式映射（可指定 `upper`/`lower` 与 `isSingle`）。
  - 若未映射，按命名约定自动尝试：大写 `/<字母>.svg`，小写 `/<字母>_l.svg`；并带有部分西里尔/拉丁混淆体回退（如 `А/A`）。

---

### 资源规范（letters/ 与 Sketch）
- **导出规范**：
  - 画布建议 `viewBox="0 0 600 600"`，所有笔画为独立 `<path>`，按书写顺序排列。
  - 笔画样式（颜色、线宽）在应用中覆盖，文件中可使用黑色/任意描边；填充需为空（`fill="none"`）。
- **命名规范**：
  - 大写：`А.svg`、`Б.svg`…（使用对应的西里尔字符）。
  - 小写：`a_l.svg`、`б_l.svg`…（统一 `_l` 后缀）。
  - 如需自定义文件名或仅提供大写：在 `map.json` 指定，例如：
```json
{
  "А": { "upper": "A.svg", "lower": "a_l.svg" },
  "Ь": { "upper": "Ь.svg", "isSingle": true }
}
```
- **Sketch（resources/letters.sketch）**：
  - 每个字母分图层管理，确保导出为路径而非描边外观；导出为 SVG 时保持原始路径顺序。

---

### 工具 - strokes.html（红色描边预览）
- **用途**：快速验证一组路径的笔顺动画与时长（与主应用一致的时序模型：按 `<path>` 顺序，时长与路径长度成正比，支持间隔）。
- **使用**：
  1) 左侧粘贴多行 `d` 或完整 SVG（会自动抽取全部 `<path>`）。
  2) 设置速度（px/s）、笔画宽度、笔画间隔、画布宽高；点击「开始动画」。
  3) 可直接拖拽本地 SVG 文件到页面自动载入。
- **输出**：右侧画布按顺序以红色描边播放；用于肉眼校对与节奏调参。

---

### 工具 - trace.html（位图描摹与导出）
- **用途**：从扫描稿/截图等位图中，辅以阈值掩膜与吸附，手绘/半自动描摹路径；编辑控制点并导出 SVG。
- **核心功能**：
  - 载入图片、阈值与掩膜显示、吸附到黑色（半径可调）、简化（RDP ε）、采样半径、平滑预览（Catmull-Rom→Cubic Bezier）。
  - 编辑模式：显示控制点；拖动、双击插点、Alt/Option+单击删点；支持撤销/重做、清空。
  - 自动骨架（Beta）：按阈值下采样并连通域抽取轮廓，生成粗略路径（可后续编辑）。
  - 导出 SVG：将当前所有路径以 `<path>` 输出，`stroke="#000" fill="none"`，便于放入 `letters/*.svg`。
- **建议流程**：导入位图 → 调阈值/吸附 → 手绘路径 → 简化/平滑 → 精修控制点 → 导出 SVG → 置入 `letters/` 并在 `map.json` 配置。

---

### 常见问题
- **打开首页没有字母动画/提示未找到 SVG**：请使用本地静态服务器访问（见“快速开始”），并确认 `letters/` 命名或 `map.json` 配置正确。
- **小写不显示**：对 `Ъ/Ь/Ы` 等不区分大小写或仅提供大写的情况，在 `map.json` 设置 `isSingle: true`。
- **时序与主应用不一致**：确保 SVG 中 `<path>` 顺序即为笔顺顺序；工具与主应用均按顺序播放，单笔时长与路径长度成正比，受“速度/间隔”影响。

---

### 许可证
- 若未另行声明，资源与代码默认遵循本仓库的 License（如未提供可根据需要补充）。
